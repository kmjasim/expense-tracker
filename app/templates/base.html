<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="csrf-token" content="{{ csrf_token() if csrf_token is defined else '' }}">
    <title>{{ page_title or "Expense Tracker" }}</title>

    <!-- Core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />

    <!-- {# Optional page-specific CSS via page_slug, e.g. 'payments' -> css/payments.css #}
    {% if page_slug %}
      <link rel="stylesheet" href="{{ url_for('static', filename='css/' ~ page_slug ~ '.css') }}">
    {% endif %} -->

    {# Extra per-page blocks remain supported #}
    {% block extra_css %}{% endblock %}
    {% block styles %}{% endblock %}
  </head>
  <body class="bg-light" data-page="{{ page_slug or '' }}">
    <div id="app-shell" class="d-flex">

      {% import 'partials/sidebar.html' as nav %}

      <!-- Sidebar -->
      {% include "partials/sidebar_frame.html" %}

      <!-- Main area -->
      <div id="main" class="flex-grow-1">
        {% include "partials/header.html" %}
        <main id="content" class="container-fluid py-4">
          {% block content %}{% endblock %}
        </main>
      </div>
    </div>

    {% block global_modals %}{% endblock %}

    <!-- Core JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
    <script src="{{ url_for('static', filename='js/app.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/recipients.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/fix-modals.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/budget.js') }}"> defer</script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>




    {# Optional page-specific JS via page_slug, e.g. 'payments' -> js/payments.js #}
    {% if page_slug %}
      <script src="{{ url_for('static', filename='js/' ~ page_slug ~ '.js') }}" defer></script>
    {% endif %}

    {# Extra per-page blocks remain supported #}
    {% block extra_js %}{% endblock %}
    {% block scripts %}{% endblock %}
  </body>
</html>
